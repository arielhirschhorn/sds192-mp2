---
title: "Mini-Project 2"
author: "Roshni and Ariel"
date: "2019-03-24"
output: 
  html_document:
    code_folding: show
---


## Loading the data

This project is so interesting and relevant to my life! This is a change Ariel made as part of the lab

```{r, message=FALSE}
library(tidyverse)
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")
#change1
```

```{r}
incumbents_df <- house_elections %>%
  filter(incumbent == TRUE) %>%
  group_by(ge_winner, party) %>%
  summarize(total = n())
```


```{r}
contributions2 <- contributions %>% 
  group_by(cand_id) %>% 
  summarize(transaction_amt = sum(transaction_amt))
candidates_and_contributions <- house_elections %>%
  left_join(contributions2, house_elections, by = c("fec_id" = "cand_id"))
```

 attempt using case_when

```{r}
newcandidates_df <- candidates_and_contributions %>%
filter(incumbent == FALSE, ge_winner != "") %>%
  group_by(ge_winner) %>%
  mutate(party2 = case_when(
    party != "R" & party != "D" ~ "Ind", TRUE ~ party
  )) %>%
  group_by(ge_winner, party2) %>%
  summarize(total = n(), avg_funding = mean(transaction_amt, na.rm = TRUE))
```
 
> Word count: `r wordcountaddin::word_count()`


```{r}
newcandidates_plot <- ggplot(newcandidates_df, aes(x = party2, y = total, fill = party2)) +
  scale_fill_manual(values = c("blue", "green", "red")) +
  geom_bar(stat = "identity") +
  facet_wrap(~ge_winner)
newcandidates_plot
```




